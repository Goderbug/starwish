import React from 'react';
import { ArrowLeft, LogIn, LogOut, User } from 'lucide-react';
import { useAuth } from '../hooks/useAuth';
import { useLanguage } from '../contexts/LanguageContext';
import { signOut } from '../lib/supabase';
import LanguageSwitcher from './LanguageSwitcher';

interface HeaderProps {
  showBackButton?: boolean;
  onBack?: () => void;
  onAuthRequired?: () => void;
}

const Header: React.FC<HeaderProps> = ({ 
  showBackButton, 
  onBack, 
  onAuthRequired 
}) => {
  const { user, loading } = useAuth();
  const { t } = useLanguage();

  const handleSignOut = async () => {
    console.log('ğŸ”„ Header: å¼€å§‹ç™»å‡º');
    
    try {
      await signOut();
      console.log('âœ… Header: ç™»å‡ºå®Œæˆ');
      // âœ… ç”±äºç¦ç”¨äº†æŒä¹…åŒ–ï¼Œç™»å‡ºåä¼šç«‹å³æ¸…é™¤æ‰€æœ‰çŠ¶æ€
      // ç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°é¦–é¡µï¼Œéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½è®¿é—®ä»»ä½•åŠŸèƒ½
    } catch (error) {
      console.error('âŒ Header: ç™»å‡ºé”™è¯¯:', error);
    }
  };

  const handleSignIn = () => {
    console.log('ğŸ” Header: è§¦å‘ç™»å½•');
    if (onAuthRequired) {
      onAuthRequired();
    }
  };

  return (
    <header className="fixed top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/20 to-transparent backdrop-blur-sm">
      <div className="flex items-center justify-between p-4 sm:p-6">
        {/* Left side - Logo and Back button */}
        <div className="flex items-center space-x-4">
          {/* Logo */}
          <div className="flex items-center">
            <svg 
              width="222" 
              height="80" 
              viewBox="0 0 222 80" 
              fill="none" 
              xmlns="http://www.w3.org/2000/svg"
              className="h-8 sm:h-10 w-auto transition-all duration-300"
            >
              <g style={{mixBlendMode: 'color-dodge'}}>
                <rect width="8.33333" height="80" transform="translate(35.8333)" fill="black"/>
                <ellipse cx="40" cy="40" rx="4.16667" ry="40" fill="url(#paint0_radial_7_39)"/>
              </g>
              <g style={{mixBlendMode: 'color-dodge'}}>
                <rect width="8.33333" height="80" transform="translate(0 44.1667) rotate(-90)" fill="black"/>
                <ellipse cx="40" cy="40" rx="4.16667" ry="40" transform="rotate(-90 40 40)" fill="url(#paint1_radial_7_39)"/>
              </g>
              <g style={{mixBlendMode: 'color-dodge'}}>
                <rect width="40" height="40" transform="translate(182 20)" fill="black"/>
                <ellipse cx="202" cy="40" rx="2.12766" ry="20" fill="url(#paint2_radial_7_39)"/>
                <ellipse cx="202" cy="39.9998" rx="2.12766" ry="20" transform="rotate(-90 202 39.9998)" fill="url(#paint3_radial_7_39)"/>
              </g>
              <path d="M69.1616 55.2731C66.1351 55.2731 63.7116 54.7042 61.8912 53.5664C60.0708 52.4059 59.1605 50.6423 59.1605 48.2757C59.1605 47.0242 59.3767 46.0684 59.8091 45.4085C60.2414 44.7486 60.8786 44.4187 61.7205 44.4187C62.3349 44.4187 62.8356 44.578 63.2224 44.8965C63.6092 45.2151 63.8027 45.6247 63.8027 46.1253C63.8027 46.5804 63.7685 46.9787 63.7003 47.32C63.7003 47.411 63.6775 47.5703 63.632 47.7979C63.6092 48.0254 63.5979 48.2644 63.5979 48.5147C63.5979 49.5387 64.1099 50.301 65.1339 50.8016C66.1806 51.3022 67.637 51.5525 69.5029 51.5525C71.4372 51.5525 72.9504 51.2112 74.0427 50.5285C75.1349 49.8231 75.6811 48.8446 75.6811 47.5931C75.6811 46.8194 75.4308 46.1595 74.9301 45.6133C74.4295 45.0444 73.8037 44.578 73.0528 44.2139C72.3019 43.827 71.2437 43.3605 69.8784 42.8144C68.1262 42.1317 66.6926 41.4832 65.5776 40.8688C64.4853 40.2544 63.541 39.4238 62.7445 38.3771C61.9708 37.3076 61.584 35.9877 61.584 34.4176C61.584 32.7792 62.0164 31.3228 62.8811 30.0485C63.7685 28.7742 65.0315 27.7844 66.6699 27.0789C68.331 26.3735 70.2766 26.0208 72.5067 26.0208C74.1678 26.0208 75.6924 26.2711 77.0805 26.7717C78.4686 27.2496 79.5723 27.9892 80.3915 28.9904C81.2334 29.9916 81.6544 31.2204 81.6544 32.6768C81.6544 34.1104 81.4382 35.1913 81.0059 35.9195C80.5735 36.6476 79.9364 37.0117 79.0944 37.0117C78.5028 37.0117 78.0021 36.8297 77.5925 36.4656C77.2057 36.1015 77.0123 35.6692 77.0123 35.1685C77.0123 34.7362 77.0464 34.338 77.1147 33.9739C77.1829 33.2912 77.2171 32.8588 77.2171 32.6768C77.2171 31.7211 76.7506 30.9929 75.8176 30.4923C74.8846 29.9916 73.7241 29.7413 72.336 29.7413C70.379 29.7413 68.8772 30.1054 67.8304 30.8336C66.8064 31.539 66.2944 32.5403 66.2944 33.8373C66.2944 34.702 66.5561 35.4416 67.0795 36.056C67.6256 36.6704 68.2969 37.1824 69.0933 37.592C69.8898 38.0016 71.0048 38.4908 72.4384 39.0597C74.1678 39.7652 75.5559 40.4023 76.6027 40.9712C77.6494 41.5401 78.5369 42.3138 79.2651 43.2923C80.016 44.2708 80.3915 45.4768 80.3915 46.9104C80.3915 49.5956 79.3675 51.6663 77.3195 53.1227C75.2942 54.5563 72.5749 55.2731 69.1616 55.2731ZM98.1952 47.3883C98.491 47.3883 98.7186 47.5248 98.8779 47.7979C99.0599 48.0709 99.1509 48.4464 99.1509 48.9243C99.1509 49.8345 98.9348 50.5399 98.5024 51.0405C97.5239 52.2466 96.4544 53.2364 95.2939 54.0101C94.1333 54.7838 92.8021 55.1707 91.3003 55.1707C86.6581 55.1707 84.3371 51.9052 84.3371 45.3744C84.3371 44.3732 84.3712 43.3605 84.4395 42.3365H83.1083C82.4256 42.3365 81.9591 42.2114 81.7088 41.9611C81.4812 41.7108 81.3675 41.3125 81.3675 40.7664C81.3675 39.4921 81.8795 38.8549 82.9035 38.8549H84.8491C85.2359 36.3518 85.8276 34.0649 86.624 31.9941C87.4204 29.9234 88.3762 28.2736 89.4912 27.0448C90.629 25.816 91.8464 25.2016 93.1435 25.2016C94.0992 25.2016 94.8501 25.6226 95.3963 26.4645C95.9424 27.3065 96.2155 28.3646 96.2155 29.6389C96.2155 33.166 94.7364 36.238 91.7781 38.8549H95.6011C95.9652 38.8549 96.2268 38.9346 96.3861 39.0939C96.5454 39.2532 96.6251 39.549 96.6251 39.9813C96.6251 41.5515 95.3394 42.3365 92.768 42.3365H88.6037C88.5582 43.4743 88.5355 44.3618 88.5355 44.9989C88.5355 47.3655 88.8085 49.0267 89.3547 49.9824C89.9236 50.9381 90.811 51.416 92.0171 51.416C92.9956 51.416 93.8603 51.1202 94.6112 50.5285C95.3621 49.9369 96.2496 49.0494 97.2736 47.8661C97.5467 47.5476 97.8539 47.3883 98.1952 47.3883ZM92.2219 28.4784C91.8805 28.4784 91.4937 28.9108 91.0613 29.7755C90.6517 30.6174 90.2535 31.8007 89.8667 33.3253C89.5026 34.8272 89.1954 36.4997 88.9451 38.3429C90.2876 37.1824 91.2889 35.8853 91.9488 34.4517C92.6315 32.9954 92.9728 31.6756 92.9728 30.4923C92.9728 29.1497 92.7225 28.4784 92.2219 28.4784ZM100.57 55.1707C99.1593 55.1707 98.0329 54.6587 97.1909 53.6347C96.349 52.6107 95.928 51.2681 95.928 49.6069C95.928 47.7865 96.349 46.0684 97.1909 44.4528C98.0329 42.8144 99.1479 41.506 100.536 40.5275C101.947 39.5262 103.437 39.0256 105.007 39.0256C105.508 39.0256 105.838 39.128 105.997 39.3328C106.179 39.5148 106.327 39.8562 106.441 40.3568C106.919 40.2658 107.42 40.2203 107.943 40.2203C109.058 40.2203 109.615 40.6185 109.615 41.4149C109.615 41.8928 109.445 43.0306 109.103 44.8283C108.58 47.4452 108.318 49.2656 108.318 50.2896C108.318 50.6309 108.398 50.904 108.557 51.1088C108.739 51.3136 108.967 51.416 109.24 51.416C109.672 51.416 110.196 51.1429 110.81 50.5968C111.425 50.0279 112.255 49.1177 113.302 47.8661C113.575 47.5476 113.882 47.3883 114.223 47.3883C114.519 47.3883 114.747 47.5248 114.906 47.7979C115.088 48.0709 115.179 48.4464 115.179 48.9243C115.179 49.8345 114.963 50.5399 114.531 51.0405C113.598 52.2011 112.608 53.1796 111.561 53.976C110.514 54.7724 109.502 55.1707 108.523 55.1707C107.772 55.1707 107.078 54.9204 106.441 54.4197C105.827 53.8964 105.36 53.1909 105.042 52.3035C103.858 54.2149 102.368 55.1707 100.57 55.1707ZM101.799 51.7232C102.3 51.7232 102.777 51.4274 103.233 50.8357C103.688 50.2441 104.018 49.459 104.222 48.4805L105.485 42.2C104.53 42.2228 103.642 42.5868 102.823 43.2923C102.026 43.9749 101.389 44.8852 100.911 46.0229C100.434 47.1607 100.195 48.3668 100.195 49.6411C100.195 50.3465 100.331 50.8699 100.604 51.2112C100.9 51.5525 101.298 51.7232 101.799 51.7232ZM114.829 55.1707C113.964 55.1707 113.349 54.7156 112.985 53.8053C112.644 52.8951 112.473 51.4388 112.473 49.4363C112.473 46.478 112.894 43.6677 113.736 41.0053C113.941 40.3454 114.271 39.8676 114.726 39.5717C115.204 39.2532 115.864 39.0939 116.706 39.0939C117.161 39.0939 117.48 39.1508 117.662 39.2645C117.844 39.3783 117.935 39.5945 117.935 39.9131C117.935 40.2772 117.764 41.0964 117.423 42.3707C117.195 43.2809 117.013 44.0773 116.877 44.76C116.74 45.4427 116.626 46.2846 116.535 47.2859C117.286 45.3289 118.128 43.736 119.061 42.5072C119.994 41.2784 120.904 40.4023 121.792 39.8789C122.702 39.3556 123.533 39.0939 124.283 39.0939C125.763 39.0939 126.502 39.8334 126.502 41.3125C126.502 41.6084 126.4 42.3252 126.195 43.4629C126.013 44.3732 125.922 44.942 125.922 45.1696C125.922 45.966 126.206 46.3643 126.775 46.3643C127.412 46.3643 128.232 45.8636 129.233 44.8624C129.529 44.5666 129.836 44.4187 130.154 44.4187C130.45 44.4187 130.678 44.5552 130.837 44.8283C131.019 45.0786 131.11 45.4199 131.11 45.8523C131.11 46.6942 130.883 47.3541 130.427 47.832C129.79 48.4919 129.039 49.0608 128.175 49.5387C127.333 49.9938 126.434 50.2213 125.478 50.2213C124.272 50.2213 123.35 49.9141 122.713 49.2997C122.099 48.6853 121.792 47.8548 121.792 46.808C121.792 46.4667 121.826 46.1253 121.894 45.784C121.94 45.3289 121.962 45.0217 121.962 44.8624C121.962 44.4983 121.837 44.3163 121.587 44.3163C121.246 44.3163 120.79 44.7031 120.222 45.4768C119.675 46.2277 119.129 47.229 118.583 48.4805C118.037 49.7321 117.593 51.0519 117.252 52.44C117.002 53.5095 116.706 54.2377 116.365 54.6245C116.046 54.9886 115.534 55.1707 114.829 55.1707ZM154.769 44.6235C154.837 44.6007 154.951 44.5893 155.11 44.5893C155.451 44.5893 155.713 44.7031 155.895 44.9307C156.077 45.1582 156.168 45.4654 156.168 45.8523C156.168 46.5577 156.031 47.1152 155.758 47.5248C155.485 47.9116 155.076 48.1961 154.53 48.3781C153.483 48.7195 152.368 48.8901 151.185 48.8901C150.183 48.8901 149.239 48.7536 148.351 48.4805C147.692 49.55 146.963 50.6537 146.167 51.7915C145.257 53.0885 144.472 53.976 143.812 54.4539C143.175 54.9317 142.446 55.1707 141.627 55.1707C140.717 55.1707 140.023 54.818 139.545 54.1125C139.09 53.4071 138.806 52.2466 138.692 50.6309L138.521 48.1392C137.816 50.0507 137.178 51.507 136.61 52.5083C136.063 53.5095 135.506 54.2036 134.937 54.5904C134.391 54.9772 133.742 55.1707 132.991 55.1707C132.058 55.1707 131.319 54.8066 130.773 54.0784C130.249 53.3502 129.919 52.2011 129.783 50.6309C129.51 47.4452 129.373 44.6576 129.373 42.2683V41.0736C129.396 40.3227 129.601 39.7993 129.988 39.5035C130.375 39.2076 130.955 39.0597 131.729 39.0597C132.32 39.0597 132.753 39.1963 133.026 39.4693C133.321 39.7196 133.469 40.152 133.469 40.7664C133.469 43.3833 133.629 46.7852 133.947 50.9723C135.495 47.7182 136.917 44.3276 138.214 40.8005C138.464 40.1179 138.76 39.6628 139.101 39.4352C139.465 39.1849 139.898 39.0597 140.398 39.0597C141.013 39.0597 141.434 39.1849 141.661 39.4352C141.912 39.6855 142.037 40.1292 142.037 40.7664C142.037 43.3833 142.196 46.7852 142.515 50.9723C143.88 48.947 144.904 47.3314 145.587 46.1253C145.245 45.4654 145.075 44.6804 145.075 43.7701C145.075 42.9964 145.245 42.2455 145.587 41.5173C145.928 40.7892 146.394 40.1975 146.986 39.7424C147.578 39.2873 148.249 39.0597 149 39.0597C149.66 39.0597 150.195 39.2987 150.604 39.7765C151.014 40.2316 151.219 40.9029 151.219 41.7904C151.219 42.8144 150.946 43.9863 150.399 45.3061C151.264 45.2606 152.413 45.09 153.847 44.7941L154.769 44.6235ZM157.677 36.8411C156.721 36.8411 156.004 36.6249 155.526 36.1925C155.048 35.7374 154.809 35.1116 154.809 34.3152C154.809 33.5188 155.117 32.8588 155.731 32.3355C156.368 31.7893 157.153 31.5163 158.086 31.5163C158.928 31.5163 159.611 31.7211 160.134 32.1307C160.658 32.5403 160.919 33.1205 160.919 33.8715C160.919 34.7817 160.623 35.5099 160.032 36.056C159.44 36.5794 158.655 36.8411 157.677 36.8411ZM157.403 55.1707C155.924 55.1707 154.843 54.6473 154.161 53.6005C153.501 52.5538 153.171 51.1657 153.171 49.4363C153.171 48.4123 153.296 47.1038 153.546 45.5109C153.819 43.8953 154.161 42.3934 154.57 41.0053C154.775 40.2772 155.048 39.7765 155.39 39.5035C155.731 39.2304 156.277 39.0939 157.028 39.0939C158.189 39.0939 158.769 39.4807 158.769 40.2544C158.769 40.8233 158.553 42.1431 158.12 44.2139C157.574 46.717 157.301 48.4123 157.301 49.2997C157.301 49.9824 157.392 50.5058 157.574 50.8699C157.756 51.234 158.063 51.416 158.496 51.416C158.905 51.416 159.417 51.1316 160.032 50.5627C160.646 49.9938 161.465 49.0949 162.489 47.8661C162.762 47.5476 163.07 47.3883 163.411 47.3883C163.707 47.3883 163.934 47.5248 164.094 47.7979C164.276 48.0709 164.367 48.4464 164.367 48.9243C164.367 49.8345 164.15 50.5399 163.718 51.0405C161.465 53.794 159.36 55.1707 157.403 55.1707ZM167.954 55.9216C166.771 55.9216 165.86 55.6485 165.223 55.1024C164.609 54.5563 164.302 53.9419 164.302 53.2592C164.302 52.6676 164.518 52.1556 164.95 51.7232C165.382 51.2908 166.02 51.0747 166.862 51.0747C167.157 51.0747 167.499 51.1088 167.886 51.1771C168.295 51.2226 168.602 51.2567 168.807 51.2795C168.784 50.6878 168.648 50.1303 168.398 49.6069C168.17 49.0836 167.874 48.5829 167.51 48.1051C167.146 47.6044 166.805 47.1721 166.486 46.808C165.781 48.1506 165.075 49.2656 164.37 50.1531C163.687 51.0405 162.936 51.8825 162.117 52.6789C161.707 53.0885 161.275 53.2933 160.82 53.2933C160.456 53.2933 160.16 53.1682 159.933 52.9179C159.705 52.6448 159.591 52.3148 159.591 51.928C159.591 51.4729 159.75 51.0519 160.069 50.6651L160.513 50.1189C161.764 48.5716 162.709 47.2972 163.346 46.296C163.733 45.6361 164.188 44.76 164.711 43.6677C165.235 42.5527 165.747 41.4036 166.247 40.2203C166.68 39.219 167.578 38.7184 168.944 38.7184C169.581 38.7184 170.025 38.7753 170.275 38.8891C170.525 39.0028 170.65 39.1849 170.65 39.4352C170.65 39.5717 170.605 39.7879 170.514 40.0837C170.423 40.3796 170.298 40.6754 170.138 40.9712C169.729 41.7904 169.524 42.4844 169.524 43.0533C169.524 43.3947 169.638 43.7701 169.865 44.1797C170.116 44.5893 170.491 45.1013 170.992 45.7157C171.72 46.6715 172.266 47.4907 172.63 48.1733C173.017 48.8332 173.21 49.5614 173.21 50.3579C173.21 50.5854 173.188 50.904 173.142 51.3136C174.257 50.8812 175.566 49.7321 177.067 47.8661C177.341 47.5476 177.648 47.3883 177.989 47.3883C178.285 47.3883 178.512 47.5248 178.672 47.7979C178.854 48.0709 178.945 48.4464 178.945 48.9243C178.945 49.789 178.729 50.4944 178.296 51.0405C177.158 52.4514 176.066 53.4185 175.019 53.9419C173.995 54.4425 172.721 54.7156 171.197 54.7611C170.286 55.5348 169.205 55.9216 167.954 55.9216ZM188.255 39.0939C188.983 39.0939 189.529 39.2873 189.893 39.6741C190.28 40.0382 190.474 40.5844 190.474 41.3125C190.474 41.9042 190.348 43.0192 190.098 44.6576C189.871 46.0457 189.689 47.3655 189.552 48.6171C189.415 49.8459 189.347 51.2226 189.347 52.7472C189.347 53.6119 189.165 54.2377 188.801 54.6245C188.46 54.9886 187.891 55.1707 187.094 55.1707C186.343 55.1707 185.797 54.9772 185.456 54.5904C185.115 54.2036 184.944 53.6233 184.944 52.8496C184.944 51.9394 185.103 50.4375 185.422 48.344C185.695 46.5236 185.831 45.363 185.831 44.8624C185.831 44.4983 185.706 44.3163 185.456 44.3163C185.16 44.3163 184.739 44.7031 184.193 45.4768C183.647 46.2277 183.101 47.229 182.555 48.4805C182.009 49.7321 181.565 51.0519 181.223 52.44C180.973 53.5095 180.677 54.2377 180.336 54.6245C180.017 54.9886 179.505 55.1707 178.8 55.1707C178.095 55.1707 177.571 54.9204 177.23 54.4197C176.911 53.8964 176.695 53.0999 176.581 52.0304C176.468 50.9609 176.411 49.3908 176.411 47.32C176.411 43.8156 176.763 40.1634 177.469 36.3632C178.197 32.563 179.255 29.3772 180.643 26.8059C182.054 24.2117 183.738 22.9147 185.695 22.9147C186.742 22.9147 187.584 23.3698 188.221 24.28C188.881 25.1675 189.211 26.328 189.211 27.7616C189.211 30.0599 188.539 32.4492 187.197 34.9296C185.854 37.3872 183.67 40.2658 180.643 43.5653C180.575 44.7486 180.541 45.966 180.541 47.2176C181.292 45.2834 182.122 43.7132 183.033 42.5072C183.966 41.2784 184.876 40.4023 185.763 39.8789C186.673 39.3556 187.504 39.0939 188.255 39.0939ZM184.978 26.2939C184.569 26.2939 184.113 26.8855 183.613 28.0688C183.112 29.2293 182.623 30.8108 182.145 32.8133C181.69 34.7931 181.314 36.9548 181.019 39.2987C182.43 37.6375 183.59 35.8284 184.5 33.8715C185.433 31.9145 185.9 30.1396 185.9 28.5467C185.9 27.8185 185.82 27.261 185.661 26.8741C185.502 26.4873 185.274 26.2939 184.978 26.2939Z" fill="white"/>
              <defs>
                <radialGradient id="paint0_radial_7_39" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(40 40) rotate(90) scale(40 4.16667)">
                  <stop offset="0.151042" stopColor="white"/>
                  <stop offset="1" stopColor="white" stopOpacity="0"/>
                </radialGradient>
                <radialGradient id="paint1_radial_7_39" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(40 40) rotate(90) scale(40 4.16667)">
                  <stop offset="0.151042" stopColor="white"/>
                  <stop offset="1" stopColor="white" stopOpacity="0"/>
                </radialGradient>
                <radialGradient id="paint2_radial_7_39" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(202 40) rotate(90) scale(20 2.12766)">
                  <stop offset="0.145833" stopColor="white"/>
                  <stop offset="1" stopColor="white" stopOpacity="0"/>
                </radialGradient>
                <radialGradient id="paint3_radial_7_39" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(202 39.9998) rotate(90) scale(20 2.12766)">
                  <stop offset="0.145833" stopColor="white"/>
                  <stop offset="1" stopColor="white" stopOpacity="0"/>
                </radialGradient>
              </defs>
            </svg>
          </div>

          {/* Back button */}
          {showBackButton && onBack && (
            <button
              onClick={onBack}
              className="p-3 rounded-full bg-white/10 backdrop-blur-sm hover:bg-white/20 transition-colors touch-manipulation"
            >
              <ArrowLeft className="w-5 h-5 sm:w-6 sm:h-6" />
            </button>
          )}
        </div>

        {/* Center - Empty space for better balance */}
        <div className="flex-1"></div>

        {/* Right side - Language switcher, Auth components, and Bolt badge */}
        <div className="flex items-center space-x-3">
          {/* Language switcher */}
          <LanguageSwitcher />

          {/* Auth section */}
          {loading ? (
            <div className="w-8 h-8 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"></div>
          ) : user ? (
            <div className="flex items-center space-x-3">
              {/* User info - è°ƒæ•´é«˜åº¦ä¸è¯­è¨€åˆ‡æ¢å™¨ä¸€è‡´ */}
              <div className="hidden sm:flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-3 py-2.5">
                <User className="w-4 h-4 text-purple-400" />
                <span className="text-sm font-medium text-white max-w-32 truncate">
                  {user.user_metadata?.full_name || user.user_metadata?.name || user.email?.split('@')[0]}
                </span>
              </div>
              
              {/* Mobile user indicator - è°ƒæ•´é«˜åº¦ä¸è¯­è¨€åˆ‡æ¢å™¨ä¸€è‡´ */}
              <div className="sm:hidden w-10 h-10 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center">
                <User className="w-4 h-4 text-purple-400" />
              </div>

              {/* Sign out button - è°ƒæ•´ä¸º40pxç›´å¾„ */}
              <button
                onClick={handleSignOut}
                className="w-10 h-10 bg-white/10 backdrop-blur-sm hover:bg-white/20 rounded-full transition-colors touch-manipulation flex items-center justify-center"
                title={t('landing.signOut')}
              >
                <LogOut className="w-4 h-4" />
              </button>
            </div>
          ) : (
            /* Sign in button - è°ƒæ•´é«˜åº¦ä¸è¯­è¨€åˆ‡æ¢å™¨ä¸€è‡´ */
            <button
              onClick={handleSignIn}
              className="flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 rounded-full px-4 py-2.5 transition-all touch-manipulation"
            >
              <LogIn className="w-4 h-4" />
              <span className="hidden sm:inline text-sm font-medium">{t('landing.signIn')}</span>
            </button>
          )}

          {/* Bolt badge */}
          <a
            href="https://bolt.new/"
            target="_blank"
            rel="noopener noreferrer"
            className="block transition-transform hover:scale-105 active:scale-95"
            title="Built with Bolt"
          >
            <img
              src="/white_circle_360x360 copy.png"
              alt="Built with Bolt"
              className="w-[40px] h-[40px] rounded-full"
            />
          </a>
        </div>
      </div>
    </header>
  );
};

export default Header;